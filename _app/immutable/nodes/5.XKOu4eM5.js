import{f as g,a as v,c as de}from"../chunks/v7cQYIZE.js";import{i as ue}from"../chunks/D9bLFNqd.js";import{o as pe}from"../chunks/3mGrHl6p.js";import{v as me,m as _,w as Y,x as _e,y,g as e,z as fe,q as r,o as f,C as G,s as i,A as ge,u as o,B as he}from"../chunks/DGPnfbVu.js";import{s as d,e as xe}from"../chunks/DedgF-gt.js";import{i as H}from"../chunks/BDwIA-n1.js";import{e as k,b as be,i as E,s as ye}from"../chunks/FzE3uPnP.js";import{s as De,a as we}from"../chunks/Dk8l8oDn.js";import{s as Se}from"../chunks/BQGV15qX.js";import{a as $e,d as Te}from"../chunks/vCmcd8lr.js";const Me=()=>{const l=Se;return{page:{subscribe:l.page.subscribe},navigating:{subscribe:l.navigating.subscribe},updated:l.updated}},Ie={subscribe(l){return Me().page.subscribe(l)}};var Ne=g("<option> </option>"),qe=g("<button> </button>"),Ae=g("<p>กำลังโหลดข้อมูล</p>"),Oe=g('<div class="appointment svelte-10hauox"><div class="appointment-time svelte-10hauox"> </div> <div class="appointment-desc svelte-10hauox"> </div> <div class="appointment-title svelte-10hauox"> </div></div>'),Ye=g("<p>ไม่พบข้อมูล</p>"),ke=g('<div class="container svelte-10hauox"><div class="sidebar svelte-10hauox"><div class="month-selector svelte-10hauox"><select name="" id="" class="svelte-10hauox"></select></div> <h2 class="svelte-10hauox">วันที่</h2> <!></div> <div class="appointments svelte-10hauox"><h2 class="svelte-10hauox"> </h2> <p> </p> <h2 class="svelte-10hauox">ตารางนัดหมาย</h2> <!></div></div>');function Je(l,F){me(F,!1);const[J,K]=De(),z=()=>we(Ie,"$page",J),h=_();pe(async()=>{console.log(e(h))});const B=new Date;let x=_(),b=_(),w,C=_();const Q=[{id:1,name:"มกราคม"},{id:2,name:"กุมภาพันธ์"},{id:3,name:"มีนาคม"},{id:4,name:"เมษายน"},{id:5,name:"พฤษภาคม"},{id:6,name:"มิถุนายน"},{id:7,name:"กรกฎาคม"},{id:8,name:"สิงหาคม"},{id:9,name:"กันยายน"},{id:10,name:"ตุลาคม"},{id:11,name:"พฤศจิกายน"},{id:12,name:"ธันวาคม"}];let u=_(B.getMonth()+1),R=B.getFullYear();const U=new Date().toISOString().split("T")[0];let c=_(U);async function V(){const a={teacher:e(h),date:e(c)};try{i(x,!0);const t=await $e(a);t.success&&(i(b,t.data.reverse()),console.log(e(b)))}catch(t){console.error("Error loading comments:",t)}finally{i(x,!1)}}async function W(){i(b,[]);const a={teacher:e(h),month:e(u),year:R};try{i(x,!0);const t=await Te(a);t.success&&(w=t.data.reverse(),console.log(w),i(C,[...new Map(w.map(s=>[Z(s.date),s])).values()]))}catch(t){console.error("Error loading comments:",t)}finally{i(x,!1)}}function L(a){return new Date(a).getDate()}function X(a){let t=new Date(a);return t.getDate()+"-"+t.getMonth()+"-"+t.getFullYear()}function Z(a){return new Date(a).toISOString().split("T")[0]}Y(()=>z(),()=>{i(h,z().url.searchParams.get("teacher"))}),Y(()=>e(c),()=>{e(c)&&(console.log(e(c)),V())}),Y(()=>e(u),()=>{e(u)&&W()}),_e(),ue();var S=ke(),$=r(S),T=r($),M=r(T);y(()=>{e(u),ge(()=>{})}),k(M,5,()=>Q,E,(a,t)=>{var s=Ne(),p={},n=r(s,!0);o(s),y(()=>{p!==(p=e(t).id)&&(s.value=(s.__value=e(t).id)??""),d(n,e(t).name)}),v(a,s)}),o(M),o(T);var ee=f(T,4);k(ee,1,()=>e(C),E,(a,t)=>{var s=qe(),p=r(s,!0);o(s),y((n,m)=>{ye(s,1,`date-button ${n??""}`,"svelte-10hauox"),d(p,m)},[()=>e(c)===L(e(t).date)?"active":"",()=>L(e(t).date)],G),xe("click",s,()=>i(c,e(t).date)),v(a,s)}),o($);var P=f($,2),I=r(P),te=r(I);o(I);var N=f(I,2),ae=r(N);o(N);var se=f(N,4);{var oe=a=>{var t=Ae();v(a,t)},re=(a,t)=>{{var s=n=>{var m=de(),ne=he(m);k(ne,1,()=>e(b),E,(ie,D)=>{var q=Oe(),A=r(q),le=r(A,!0);o(A);var O=f(A,2),ce=r(O);o(O);var j=f(O,2),ve=r(j);o(j),o(q),y(()=>{d(le,e(D).time),d(ce,`รหัสนักศึกษา : ${e(D).stdId??""}`),d(ve,`ชื่อนักศึกษา : ${e(D).stdName??""}
                        ${e(D).stdLastName??""}`)}),v(ie,q)}),v(n,m)},p=n=>{var m=Ye();v(n,m)};H(a,n=>{e(b).length>0?n(s):n(p,!1)},t)}};H(se,a=>{e(x)?a(oe):a(re,!1)})}o(P),o(S),y(a=>{d(te,`ชื่ออาจารย์ : ${e(h)??""}`),d(ae,`วันที่ที่เลือก : ${a??""}`)},[()=>X(e(c))],G),be(M,()=>e(u),a=>i(u,a)),v(l,S),fe(),K()}export{Je as component};
